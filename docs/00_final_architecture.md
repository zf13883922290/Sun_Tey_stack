# Sun_Tey Stack — 最终架构

## 双机分工方案
```
┌─────────────────────────────────┐     局域网 192.168.1.x
│      Ubuntu 服务器 (X99)        │◄──────────────────────►│       Windows 11        │
│                                 │                        │                         │
│  GPU 0: Tesla P100 16G          │                        │  RTX 5060 Ti 16G        │
│  GPU 1: Tesla P100 16G          │                        │  CUDA 12.8 + 驱动570    │
│  CUDA 12.1 + 驱动530            │                        │                         │
│                                 │                        │  ┌───────────────────┐  │
│  ┌─────────────────────────┐   │                        │  │ Ollama            │  │
│  │ LLaMA-Factory  训练微调  │   │   模型文件传输          │  │ 推理服务 :11434   │  │
│  │ NeMo Framework          │   │──────────────────────►│  │ OpenAI 兼容 API   │  │
│  │ Whisper 高棉语微调       │   │                        │  └───────────────────┘  │
│  └─────────────────────────┘   │                        │                         │
│                                 │   MCP/记忆调用          │  ┌───────────────────┐  │
│  ┌─────────────────────────┐   │◄──────────────────────│  │ VSCode + Cline    │  │
│  │ ChromaDB  长期记忆       │   │                        │  │ 连接 Ollama       │  │
│  │ MCP Server  工具调用     │   │                        │  │ 连接 Ubuntu MCP   │  │
│  │ vLLM float16 备用推理   │   │                        │  └───────────────────┘  │
│  └─────────────────────────┘   │                        │                         │
└─────────────────────────────────┘                        └─────────────────────────┘
```

## 服务地址

| 服务 | 地址 | 机器 |
|------|------|------|
| Ollama 推理 | http://192.168.1.x:11434 | Windows |
| MCP Server | http://192.168.1.Ubuntu:9000 | Ubuntu |
| ChromaDB | http://192.168.1.Ubuntu:8001 | Ubuntu |
| LLaMA-Factory UI | http://192.168.1.Ubuntu:7860 | Ubuntu |

## 工作流程

1. Cline 发送请求 → Ollama (Windows 5060 Ti) 推理
2. MCP 工具调用 → Ubuntu MCP Server
3. 记忆检索 → Ubuntu ChromaDB
4. 微调完成 → 模型文件 scp 传到 Windows → Ollama 加载
